{"version":3,"file":"main-CojZrQT8.js","sources":["../../src/main.js"],"sourcesContent":["/* =========================================\n   1. НАСТРОЙКИ И БИБЛИОТЕКИ\n   ========================================= */\n   gsap.registerPlugin(ScrollTrigger);\n\n   // 1. Плавный скролл\n   const lenis = new Lenis({\n       duration: 1.2,\n       easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n       smooth: true,\n   });\n\n   function raf(time) {\n       lenis.raf(time);\n       requestAnimationFrame(raf);\n   }\n   requestAnimationFrame(raf);\n\n   // 2. Хедер\n   const header = document.querySelector('.header');\n   window.addEventListener('scroll', () => {\n       header.classList.toggle('scrolled', window.scrollY > 50);\n   });\n\n   /* =========================================\n      2. THREE.JS ФОН\n      ========================================= */\n   function initThreeHero() {\n       const container = document.getElementById('canvas-container');\n       if (!container || typeof THREE === 'undefined') return;\n\n       const scene = new THREE.Scene();\n       scene.fog = new THREE.FogExp2(0x111827, 0.002);\n\n       const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n       camera.position.z = 50;\n       camera.position.y = 10;\n\n       const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n       renderer.setSize(window.innerWidth, window.innerHeight);\n       renderer.setPixelRatio(window.devicePixelRatio);\n       container.appendChild(renderer.domElement);\n\n       const geometry = new THREE.PlaneGeometry(100, 100, 40, 40);\n       const material = new THREE.MeshBasicMaterial({\n           color: 0xCCFF00,\n           wireframe: true,\n           transparent: true,\n           opacity: 0.3\n       });\n\n       const plane = new THREE.Mesh(geometry, material);\n       plane.rotation.x = -Math.PI / 2;\n       scene.add(plane);\n\n       const count = geometry.attributes.position.count;\n       const initialPositions = new Float32Array(count * 3);\n       for (let i = 0; i < count; i++) {\n           initialPositions[i * 3] = geometry.attributes.position.getX(i);\n           initialPositions[i * 3 + 1] = geometry.attributes.position.getY(i);\n           initialPositions[i * 3 + 2] = geometry.attributes.position.getZ(i);\n       }\n\n       let time = 0;\n       function animate() {\n           requestAnimationFrame(animate);\n           time += 0.01;\n           const positions = geometry.attributes.position;\n           for (let i = 0; i < count; i++) {\n               const x = initialPositions[i * 3];\n               const z = Math.sin(x / 5 + time) * 3 + Math.cos(x / 3 + time) * 2;\n               positions.setZ(i, z);\n           }\n           geometry.attributes.position.needsUpdate = true;\n           plane.rotation.z += 0.001;\n           renderer.render(scene, camera);\n       }\n       animate();\n\n       window.addEventListener('resize', () => {\n           camera.aspect = window.innerWidth / window.innerHeight;\n           camera.updateProjectionMatrix();\n           renderer.setSize(window.innerWidth, window.innerHeight);\n       });\n   }\n\n   /* =========================================\n      3. МОБИЛЬНОЕ МЕНЮ И COOKIES\n      ========================================= */\n   const burger = document.querySelector('.header__burger');\n   const mobileMenu = document.querySelector('.mobile-menu');\n   const mobileLinks = document.querySelectorAll('.mobile-menu__link');\n\n   function toggleMenu() {\n       const isActive = burger.classList.toggle('active');\n       mobileMenu.classList.toggle('active');\n\n       if (isActive) {\n           document.body.style.overflow = 'hidden';\n           gsap.to(mobileLinks, { y: 0, opacity: 1, duration: 0.4, stagger: 0.1, delay: 0.2 });\n       } else {\n           document.body.style.overflow = '';\n           gsap.to(mobileLinks, { y: 20, opacity: 0, duration: 0.3 });\n       }\n   }\n\n   if(burger) {\n       burger.addEventListener('click', toggleMenu);\n       mobileLinks.forEach(link => {\n           link.addEventListener('click', () => {\n               if (burger.classList.contains('active')) toggleMenu();\n           });\n       });\n   }\n\n   // Cookies\n   const cookiePopup = document.getElementById('cookiePopup');\n   if (cookiePopup && !localStorage.getItem('cookiesAccepted')) {\n       setTimeout(() => cookiePopup.classList.add('show'), 2000);\n       document.getElementById('acceptCookies').addEventListener('click', () => {\n           localStorage.setItem('cookiesAccepted', 'true');\n           cookiePopup.classList.remove('show');\n       });\n   }\n\n   /* =========================================\n      4. ВАЛИДАЦИЯ ФОРМЫ (С ЧЕКБОКСОМ)\n      ========================================= */\n   const form = document.getElementById('contactForm');\n   if(form) {\n       const captchaInput = document.getElementById('captcha');\n       const captchaLabel = document.getElementById('captchaLabel');\n       let captchaResult = 0;\n\n       const initCaptcha = () => {\n           const n1 = Math.floor(Math.random() * 10) + 1;\n           const n2 = Math.floor(Math.random() * 10) + 1;\n           captchaResult = n1 + n2;\n           captchaLabel.textContent = `Сколько будет ${n1} + ${n2}?`;\n       };\n       initCaptcha();\n\n       form.addEventListener('submit', (e) => {\n           e.preventDefault();\n           let isValid = true;\n\n           // Функция подсветки ошибки\n           const setError = (id, condition) => {\n               const el = document.getElementById(id);\n               const group = el.closest('.form-group');\n               if (group) group.classList.toggle('error', condition);\n               if(condition) isValid = false;\n           };\n\n           // 1. Имя\n           setError('name', document.getElementById('name').value.trim().length < 2);\n\n           // 2. Email\n           setError('email', !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(document.getElementById('email').value));\n\n           // 3. Телефон\n           setError('phone', !/^[0-9+ ]{7,15}$/.test(document.getElementById('phone').value));\n\n           // 4. Капча\n           setError('captcha', parseInt(captchaInput.value) !== captchaResult);\n\n           // 5. ЧЕКБОКС (Новая проверка)\n           const policyCheckbox = document.getElementById('policy');\n           const policyGroup = policyCheckbox.closest('.form-checkbox');\n\n           if (!policyCheckbox.checked) {\n               policyGroup.classList.add('error'); // Красим в красный\n               isValid = false;\n           } else {\n               policyGroup.classList.remove('error');\n           }\n\n           // Если всё верно\n           if(isValid) {\n               const btn = form.querySelector('button');\n               const oldText = btn.innerText;\n               btn.innerText = 'Отправка...';\n               btn.disabled = true; // Блокируем кнопку от повторных кликов\n\n               setTimeout(() => {\n                   document.getElementById('formSuccess').classList.add('active');\n                   btn.innerText = oldText;\n                   btn.disabled = false;\n                   form.reset();\n                   initCaptcha();\n                   // Сбрасываем стили ошибок, если они остались\n                   policyGroup.classList.remove('error');\n               }, 1500);\n           }\n       });\n   }\n\n   /* =========================================\n      5. АНИМАЦИИ\n      ========================================= */\n   document.addEventListener('DOMContentLoaded', () => {\n       initThreeHero();\n\n       const heroTl = gsap.timeline();\n       heroTl.from(\".hero__title\", { y: 50, opacity: 0, duration: 1, ease: \"power3.out\", delay: 0.5 })\n             .from(\".hero__subtitle\", { y: 30, opacity: 0, duration: 1, ease: \"power3.out\" }, \"-=0.8\")\n             .from(\".hero__actions-row\", { y: 20, opacity: 0, duration: 1, ease: \"power3.out\" }, \"-=0.8\");\n\n       // Методология (по одной карточке)\n       const methodCards = document.querySelectorAll('.methodology .card');\n       methodCards.forEach((card, index) => {\n           gsap.fromTo(card,\n               { y: 50, opacity: 0 },\n               {\n                   y: 0, opacity: 1, duration: 0.8, ease: \"power3.out\", delay: index * 0.1,\n                   scrollTrigger: { trigger: card, start: \"top 90%\", toggleActions: \"play none none reverse\" }\n               }\n           );\n       });\n\n       // Инновации\n       gsap.from('.innovations__text', {\n           scrollTrigger: { trigger: '.innovations', start: 'top 75%' },\n           x: -50, opacity: 0, duration: 1\n       });\n\n       gsap.from('.glass-card', {\n           scrollTrigger: { trigger: '.innovations', start: 'top 75%', scrub: 1 },\n           rotate: 10, y: 100, ease: \"none\"\n       });\n\n       // Блог (по одной карточке)\n       const blogCards = document.querySelectorAll('.blog-card');\n       blogCards.forEach((card, index) => {\n           gsap.fromTo(card,\n               { y: 40, opacity: 0 },\n               {\n                   y: 0, opacity: 1, duration: 0.8, ease: \"power2.out\", delay: index * 0.1,\n                   scrollTrigger: { trigger: card, start: \"top 85%\" }\n               }\n           );\n       });\n\n       setTimeout(() => ScrollTrigger.refresh(), 500);\n   });"],"names":["lenis","t","raf","time","header","initThreeHero","container","scene","camera","renderer","geometry","material","plane","count","initialPositions","i","animate","positions","x","z","burger","mobileMenu","mobileLinks","toggleMenu","isActive","link","cookiePopup","form","captchaInput","captchaLabel","captchaResult","initCaptcha","n1","n2","isValid","setError","id","condition","group","policyCheckbox","policyGroup","btn","oldText","card","index"],"mappings":"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"}